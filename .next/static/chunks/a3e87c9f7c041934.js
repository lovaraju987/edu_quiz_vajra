(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},16015,(e,t,s)=>{},98547,(e,t,s)=>{var r=e.i(47167);e.r(16015);var n=e.r(71645),i=n&&"object"==typeof n&&"default"in n?n:{default:n},a=void 0!==r.default&&r.default.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,s=t.name,r=void 0===s?"stylesheet":s,n=t.optimizeForSpeed,i=void 0===n?a:n;c(o(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",c("boolean"==typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="u">typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t,s=e.prototype;return s.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"u">typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(a||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){if(c(o(e),"`insertRule` accepts only strings"),"u"<typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return a||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},s.replaceRule=function(e,t){if(this._optimizeForSpeed||"u"<typeof window){var s="u">typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(r){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];c(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},s.deleteRule=function(e){if("u"<typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},s.flush=function(){this._injected=!1,this._rulesCount=0,"u">typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},s.cssRules=function(){var e=this;return"u"<typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},s.makeStyleTag=function(e,t,s){t&&c(o(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return s?n.insertBefore(r,s):n.appendChild(r),r},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},u={};function h(e,t){if(!t)return"jsx-"+e;var s=String(t),r=e+s;return u[r]||(u[r]="jsx-"+d(e+"-"+s)),u[r]}function f(e,t){"u"<typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var s=e+t;return u[s]||(u[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[s]}var m=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,r=void 0===s?null:s,n=t.optimizeForSpeed,i=void 0!==n&&n;this._sheet=r||new l({name:"styled-jsx",optimizeForSpeed:i}),this._sheet.inject(),r&&"boolean"==typeof i&&(this._sheet.setOptimizeForSpeed(i),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"u">typeof window&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),r=s.styleId,n=s.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var i=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=i,this._instancesCounts[r]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var r=this._fromServer&&this._fromServer[s];r?(r.parentNode.removeChild(r),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],r=e[1];return i.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,r=e.id;if(s){var n=h(r,s);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return f(n,e)}):[f(n,t)]}}return{styleId:h(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),p=n.createContext(null);function x(){return new m}function g(){return n.useContext(p)}p.displayName="StyleSheetContext";var v=i.default.useInsertionEffect||i.default.useLayoutEffect,b="u">typeof window?x():void 0;function j(e){var t=b||g();return t&&("u"<typeof window?t.add(e):v(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}j.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},s.StyleRegistry=function(e){var t=e.registry,s=e.children,r=n.useContext(p),a=n.useState(function(){return r||t||x()})[0];return i.default.createElement(p.Provider,{value:a},s)},s.createStyleRegistry=x,s.style=j,s.useStyleRegistry=g},37902,(e,t,s)=>{t.exports=e.r(98547).style},51657,e=>{"use strict";var t=e.i(43476),s=e.i(37902),r=e.i(71645),n=e.i(18566),i=e.i(46696);function a(){let e,a=(0,n.useSearchParams)(),o=(0,n.useRouter)(),l=a.get("level")||"1",c=a.get("id")||"Unknown",[d,u]=(0,r.useState)([]),[h,f]=(0,r.useState)(!0),[m,p]=(0,r.useState)(0),[x,g]=(0,r.useState)(0),[v,b]=(0,r.useState)(!1),[j,y]=(0,r.useState)(900),_=(0,r.useRef)(null),S=(0,r.useRef)(null),[w,N]=(0,r.useState)(!1),[k,R]=(0,r.useState)("Initializing AI..."),[C,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>((async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.warn("Camera access unavailable. This usually happens on non-localhost HTTP connections."),R("OFFLINE MODE (CAMERA UNAVAILABLE)");return}let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});S.current&&S.current.getTracks().forEach(e=>e.stop()),S.current=e,_.current&&(_.current.srcObject=e,N(!0),R("STRICT AI MONITORING ACTIVE"))}catch(e){console.error("Camera access denied",e),R("CAMERA BLOCKED - FLAG RAISED")}})(),()=>{F()}),[]);let F=()=>{S.current&&(S.current.getTracks().forEach(e=>e.stop()),S.current=null),_.current&&(_.current.srcObject=null),N(!1)};(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch(`/api/quiz/questions?level=${l}&idNo=${c}`);if(403===e.status)return void o.push("/results?error=already_attempted");let t=await e.json();Array.isArray(t)?u(t.map(e=>({q:e.text,options:e.options,a:e.answerIndex,topic:e.category}))):(i.toast.error(t.error||"Failed to load questions. Please try again."),o.push("/student/dashboard"))}catch(e){console.error("Failed to fetch questions",e)}finally{f(!1)}})();let e=setInterval(()=>{y(e=>e<=0?(I(),0):e-1)},1e3);return()=>clearInterval(e)},[]);let I=async()=>{F(),b(!0);let e={studentId:c.toUpperCase(),idNo:c.toUpperCase(),score:x,totalQuestions:d.length,level:l,studentName:localStorage.getItem(`student_name_${c}`)||"Student",schoolName:localStorage.getItem(`student_school_${c}`)||"School"};try{await fetch("/api/quiz/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),localStorage.setItem(`attempted_${c}_${new Date().toDateString()}`,"true"),localStorage.setItem("last_quiz_score",x.toString()),localStorage.setItem("last_quiz_total",d.length.toString()),localStorage.setItem("last_quiz_level",l),localStorage.setItem("show_result_button","true")}catch(e){console.error("Failed to save result",e)}setTimeout(()=>{o.push(`/student/dashboard?completed=true&score=${x}&total=${d.length}`)},2e3)};return h||0===d.length?(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center font-sans",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-4"}),(0,t.jsx)("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-xs",children:"Generating Your Unique Quiz..."})]}):v?(0,t.jsxs)("div",{className:"min-h-screen bg-[#002e5d] flex flex-col items-center justify-center text-white p-6 font-sans",children:[(0,t.jsx)("div",{className:"text-8xl mb-8 animate-bounce",children:"ðŸŽ¯"}),(0,t.jsx)("h1",{className:"text-4xl font-black mb-4 tracking-tight uppercase",children:"Quiz Submitted!"}),(0,t.jsx)("p",{className:"text-blue-200 font-bold mb-8",children:"Calculating your results and securing your rank..."}),(0,t.jsx)("div",{className:"w-64 h-2 bg-blue-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-yellow-400 animate-[progress_2s_ease-in-out]"})})]}):(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 min-h-screen bg-slate-50 font-sans text-slate-900",children:[(0,t.jsxs)("header",{className:"jsx-ec52f184e9111193 bg-white border-b px-4 md:px-8 h-16 md:h-20 flex items-center justify-between sticky top-0 z-50",children:[(0,t.jsx)("div",{className:"jsx-ec52f184e9111193 flex items-center gap-2 md:gap-6",children:(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 flex flex-col",children:[(0,t.jsx)("span",{className:"jsx-ec52f184e9111193 text-[8px] md:text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none mb-1",children:"Attempting Quiz"}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"jsx-ec52f184e9111193 w-2 h-2 md:w-3 md:h-3 rounded-full bg-red-500 animate-pulse"}),(0,t.jsxs)("span",{className:"jsx-ec52f184e9111193 text-sm md:text-xl font-black text-[#002e5d] uppercase tracking-tighter",children:["Level ",l]})]})]})}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 flex items-center gap-4 md:gap-12",children:[(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 text-center",children:[(0,t.jsx)("p",{className:"jsx-ec52f184e9111193 text-[8px] md:text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Time Left"}),(0,t.jsx)("p",{className:`jsx-ec52f184e9111193 text-sm md:text-2xl font-mono font-black ${j<300?"text-red-600":"text-slate-800"}`,children:(e=Math.floor(j/60),`${e}:${(j%60).toString().padStart(2,"0")}`)})]}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 text-center hidden sm:block",children:[(0,t.jsx)("p",{className:"jsx-ec52f184e9111193 text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Questions"}),(0,t.jsxs)("p",{className:"jsx-ec52f184e9111193 text-2xl font-black text-slate-800",children:[m+1," / ",d.length]})]}),(0,t.jsx)("button",{onClick:()=>z(!0),className:"jsx-ec52f184e9111193 px-3 py-2 md:px-4 md:py-2 bg-red-50 text-red-600 rounded-xl text-[8px] md:text-[10px] font-black uppercase tracking-widest hover:bg-red-600 hover:text-white transition-all shadow-sm",children:"Exit"})]})]}),(0,t.jsxs)("main",{className:"jsx-ec52f184e9111193 max-w-3xl mx-auto py-4 md:py-8 px-4 md:px-6",children:[(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 mb-4 md:mb-6 flex flex-col items-center gap-2",children:[(0,t.jsxs)("span",{className:"jsx-ec52f184e9111193 px-4 py-1.5 bg-blue-700 text-white text-[8px] md:text-[10px] font-black uppercase tracking-[0.2em] rounded-full shadow-lg",children:["Topic: ",d[m].topic]}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 sm:hidden text-[10px] font-black text-slate-400 uppercase tracking-widest",children:["Question ",m+1," of ",d.length]})]}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 bg-white p-5 md:p-8 rounded-[24px] md:rounded-[40px] shadow-2xl shadow-blue-100 border border-slate-100 mb-6",children:[(0,t.jsx)("h2",{className:"jsx-ec52f184e9111193 text-lg md:text-2xl font-black text-slate-900 leading-tight mb-6 md:mb-8",children:d[m].q}),(0,t.jsx)("div",{className:"jsx-ec52f184e9111193 grid grid-cols-1 gap-3 md:gap-4",children:d[m].options.map((e,s)=>(0,t.jsxs)("button",{onClick:()=>{s===d[m].a&&g(x+1),m<d.length-1?p(m+1):I()},className:"jsx-ec52f184e9111193 group w-full p-3 md:p-4 text-left bg-slate-50 hover:bg-[#002e5d] border-2 border-slate-100 hover:border-[#002e5d] rounded-xl md:rounded-2xl transition-all duration-300 flex items-center justify-between active:scale-[0.99]",children:[(0,t.jsx)("span",{className:"jsx-ec52f184e9111193 font-bold text-sm md:text-base text-slate-700 group-hover:text-white pr-4",children:e}),(0,t.jsx)("div",{className:"jsx-ec52f184e9111193 shrink-0 w-7 h-7 rounded-full bg-white border-2 border-slate-200 group-hover:bg-[#e11d48] group-hover:border-[#e11d48] flex items-center justify-center font-black text-xs text-slate-300 group-hover:text-white transition-all",children:String.fromCharCode(65+s)})]},s))})]}),(0,t.jsx)("div",{className:"jsx-ec52f184e9111193 text-center",children:(0,t.jsx)("p",{className:"jsx-ec52f184e9111193 text-[10px] text-slate-400 font-bold uppercase tracking-widest italic",children:"Questions framed by EduQuiz AI"})})]}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 fixed bottom-3 right-3 md:bottom-6 md:right-6 z-50 flex flex-col items-end gap-2 pointer-events-none",children:[(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 relative w-20 h-28 md:w-36 md:h-48 bg-black rounded-xl md:rounded-[24px] overflow-hidden shadow-2xl border-2 border-white/20 backdrop-blur-md",children:[(0,t.jsx)("video",{ref:_,autoPlay:!0,muted:!0,playsInline:!0,className:"jsx-ec52f184e9111193 w-full h-full object-cover scale-x-[-1]"}),!w&&(0,t.jsx)("div",{className:"jsx-ec52f184e9111193 absolute inset-0 flex items-center justify-center bg-slate-900 text-white text-[10px] font-black text-center p-2",children:"NO FEED"}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 absolute top-2 left-2 flex items-center gap-1.5 bg-red-600/90 text-white text-[8px] font-black px-2 py-0.5 rounded-full animate-pulse uppercase tracking-[0.1em]",children:[(0,t.jsx)("div",{className:"jsx-ec52f184e9111193 w-1 h-1 rounded-full bg-white"}),"Live"]})]}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 flex flex-col items-end gap-2",children:[(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 bg-[#002e5d]/90 backdrop-blur-md text-white text-[7px] md:text-[9px] font-black px-3 py-1.5 rounded-xl border border-white/10 shadow-lg flex items-center gap-2 uppercase tracking-widest leading-none",children:[(0,t.jsx)("span",{className:"jsx-ec52f184e9111193 w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"}),k]}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 bg-slate-900/40 backdrop-blur-sm text-slate-300 text-[6px] md:text-[8px] font-bold px-3 py-1 rounded-lg uppercase tracking-[0.2em] leading-none",children:["Session: ",c]})]})]}),C&&(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,t.jsx)("div",{onClick:()=>z(!1),className:"jsx-ec52f184e9111193 absolute inset-0 bg-[#002e5d]/40 backdrop-blur-sm animate-[fadeIn_0.2s_ease-out]"}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 relative w-full max-w-sm bg-white rounded-3xl shadow-2xl overflow-hidden animate-[modalIn_0.3s_cubic-bezier(0.34,1.56,0.64,1)]",children:[(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 p-8 text-center",children:[(0,t.jsx)("div",{className:"jsx-ec52f184e9111193 w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center mx-auto mb-6 text-3xl",children:"âš ï¸"}),(0,t.jsx)("h3",{className:"jsx-ec52f184e9111193 text-2xl font-black text-slate-900 mb-2 uppercase tracking-tight",children:"Stop!"}),(0,t.jsx)("p",{className:"jsx-ec52f184e9111193 text-slate-500 font-medium leading-relaxed",children:"Are you sure you want to exit? Your progress for this session will be lost."})]}),(0,t.jsxs)("div",{className:"jsx-ec52f184e9111193 flex border-t border-slate-100",children:[(0,t.jsx)("button",{onClick:()=>z(!1),className:"jsx-ec52f184e9111193 flex-1 py-5 text-sm font-black text-slate-400 uppercase tracking-widest hover:bg-slate-50 transition-colors",children:"Stay"}),(0,t.jsx)("button",{onClick:()=>{z(!1),I()},className:"jsx-ec52f184e9111193 flex-1 py-5 text-sm font-black text-red-600 uppercase tracking-widest hover:bg-red-50 transition-colors border-l border-slate-100",children:"Exit Quiz"})]})]})]}),(0,t.jsx)(s.default,{id:"ec52f184e9111193",children:"@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes modalIn{0%{opacity:0;transform:scale(.9)translateY(20px)}to{opacity:1;transform:scale(1)translateY(0)}}"})]})}function o(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:(0,t.jsx)(a,{})})}e.s(["default",()=>o])}]);