(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82137,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function a(){let[a,l]=(0,s.useState)(!1),[r,o]=(0,s.useState)(!0),[n,i]=(0,s.useState)({schoolName:"",schoolBoard:"CBSE",uniqueId:"",designation:"",phone:"",address:""}),[c,d]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{let e=localStorage.getItem("faculty_session"),t=e?JSON.parse(e):null;if(t){d(t);try{let e=await fetch(`/api/faculty/profile?facultyId=${t.id}`),s=await e.json();e.ok&&s.isProfileActive&&(i({schoolName:s.schoolName,schoolBoard:s.schoolBoard,uniqueId:s.uniqueId,designation:s.designation||"",phone:s.phone||"",address:s.address||""}),l(!0))}catch(e){console.error("Failed to fetch profile",e)}}o(!1)})()},[]);let x=async t=>{if(t.preventDefault(),n.uniqueId.length<2)return void e.A(57706).then(({toast:e})=>e.error("Unique ID must be at least 2 letters."));try{let t=await fetch("/api/faculty/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facultyId:c.id,...n})}),s=await t.json();if(t.ok){let t={...c,...s.faculty};localStorage.setItem("faculty_session",JSON.stringify(t)),l(!0),e.A(57706).then(({toast:e})=>e.success("School Profile Activated Successfully!"))}else e.A(57706).then(({toast:e})=>e.error(s.error||"Failed to save profile"))}catch(t){e.A(57706).then(({toast:e})=>e.error("Connection error."))}};return r?(0,t.jsx)("div",{className:"p-10 text-center font-bold text-slate-400",children:"Loading profile..."}):(0,t.jsxs)("div",{className:"space-y-8 max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-[#002e5d] text-white p-8 rounded-[40px] shadow-2xl relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:(0,t.jsx)("div",{className:"text-9xl font-black rotate-12",children:"PROF"})}),(0,t.jsxs)("div",{className:"relative z-10 flex items-center gap-8",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full bg-blue-700 border-4 border-white/20 flex items-center justify-center text-4xl shadow-inner font-black uppercase",children:c?.name?.split(" ").map(e=>e[0]).join("").slice(0,2)||"FA"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-black tracking-tight",children:c?.name||"Faculty Member"}),(0,t.jsx)("p",{className:"text-blue-200 font-bold uppercase tracking-[0.2em] text-xs mt-1",children:a?`${n.schoolName} | ${n.schoolBoard}`:"Profile Pending Activation"}),(0,t.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,t.jsxs)("span",{className:"px-3 py-1 bg-white/10 rounded-full text-[10px] font-black uppercase tracking-widest border border-white/10",children:["ID: ",c?.id?.slice(-6)||"N/A"]}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${a?"bg-green-500/20 text-green-300 border-green-500/20":"bg-amber-500/20 text-amber-300 border-amber-500/20"}`,children:a?"Verified":"Pending Activation"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white p-10 rounded-[40px] border border-slate-100 shadow-xl shadow-blue-50/50",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,t.jsxs)("h3",{className:"text-2xl font-black text-slate-900 flex items-center gap-3 tracking-tight",children:[(0,t.jsx)("span",{children:"ðŸ«"})," School Configuration"]})}),a?(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 p-8 bg-slate-50 rounded-3xl border border-slate-100 animate-[fadeIn_0.5s_ease-out]",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active School"}),(0,t.jsx)("p",{className:"text-lg font-black text-slate-800",children:n.schoolName})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Board Affiliation"}),(0,t.jsx)("p",{className:"text-lg font-black text-slate-800",children:n.schoolBoard})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Student ID Prefix"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"px-3 py-1 bg-[#002e5d] text-white rounded-lg font-mono font-black text-lg shadow-md",children:n.uniqueId}),(0,t.jsxs)("span",{className:"text-xs text-slate-400 font-bold italic",children:["e.g. ",n.uniqueId,"-1001"]})]})]})]}):(0,t.jsxs)("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"School Name"}),(0,t.jsx)("input",{type:"text",required:!0,value:n.schoolName,onChange:e=>i({...n,schoolName:e.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:ring-4 focus:ring-blue-100 focus:border-[#002e5d] outline-none transition-all font-bold text-slate-800",placeholder:"e.g. Vajra International School"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"School Board"}),(0,t.jsxs)("select",{value:n.schoolBoard,onChange:e=>i({...n,schoolBoard:e.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:ring-4 focus:ring-blue-100 focus:border-[#002e5d] outline-none transition-all font-black text-slate-700",children:[(0,t.jsx)("option",{children:"CBSE"}),(0,t.jsx)("option",{children:"ICSE"}),(0,t.jsx)("option",{children:"State Board"}),(0,t.jsx)("option",{children:"IB"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Unique ID (Min 2 letters)"}),(0,t.jsx)("input",{type:"text",maxLength:5,required:!0,value:n.uniqueId,onChange:e=>{let t=e.target.value.toUpperCase();t.length>=2&&["AB","XY","EQ"].includes(t)?e.target.setCustomValidity("This ID is already in use. Please choose another."):e.target.setCustomValidity(""),i({...n,uniqueId:t})},className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:ring-4 focus:ring-blue-100 focus:border-[#002e5d] outline-none transition-all font-mono font-black uppercase text-slate-800",placeholder:"e.g. VG"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Designation"}),(0,t.jsx)("input",{type:"text",value:n.designation,onChange:e=>i({...n,designation:e.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:ring-4 focus:ring-blue-100 outline-none font-bold text-slate-800",placeholder:"e.g. Principal"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",value:n.phone,onChange:e=>i({...n,phone:e.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:ring-4 focus:ring-blue-100 outline-none font-bold text-slate-800",placeholder:"e.g. 9876543210"})]}),(0,t.jsxs)("div",{className:"md:col-span-3 space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"School Address"}),(0,t.jsx)("input",{type:"text",value:n.address,onChange:e=>i({...n,address:e.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:ring-4 focus:ring-blue-100 outline-none font-bold text-slate-800",placeholder:"e.g. 123 Education Lane, Hyderabad"})]}),(0,t.jsx)("div",{className:"md:col-span-3 flex justify-end pt-4",children:(0,t.jsx)("button",{type:"submit",className:"px-12 py-4 bg-[#002e5d] text-white font-black rounded-2xl hover:bg-[#003d7a] transition-all shadow-[0_10px_20px_rgba(0,46,93,0.2)] active:scale-95 uppercase tracking-widest text-xs",children:"Activate School Profile"})})]})]})]})}e.s(["default",()=>a])},57706,e=>{e.v(e=>Promise.resolve().then(()=>e(46696)))}]);