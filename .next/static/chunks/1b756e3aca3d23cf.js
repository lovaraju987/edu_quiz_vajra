(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44234,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(46696);function n(){let[e,n]=(0,s.useState)(!1),[l,r]=(0,s.useState)({current:"",new:"",confirm:""}),[o,i]=(0,s.useState)({maintenanceMode:!1,aiAutoScheduler:!0}),[d,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/settings");if(e.ok){let t=await e.json();t.settings&&i({maintenanceMode:t.settings.maintenanceMode,aiAutoScheduler:t.settings.aiAutoScheduler})}}catch(e){console.error("Failed to load settings")}finally{c(!1)}})()},[]);let u=async e=>{if(e.preventDefault(),l.new!==l.confirm)return void a.toast.error("New passwords do not match");n(!0);try{let e=await fetch("/api/admin/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:l.current,newPassword:l.new})}),t=await e.json();e.ok?(a.toast.success("Password updated successfully"),r({current:"",new:"",confirm:""})):a.toast.error(t.error||"Failed to update password")}catch(e){a.toast.error("Connection failed")}finally{n(!1)}},x=async e=>{let t=!o[e];i(s=>({...s,[e]:t}));try{(await fetch("/api/admin/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({[e]:t})})).ok?a.toast.success(`${"maintenanceMode"===e?"Maintenance Mode":"AI Scheduler"} ${t?"Enabled":"Disabled"}`):(i(s=>({...s,[e]:!t})),a.toast.error("Failed to update setting"))}catch(s){i(s=>({...s,[e]:!t})),a.toast.error("Connection error")}};return(0,t.jsxs)("div",{className:"space-y-8 max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-slate-900",children:"Settings"}),(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-8 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-xl",children:"ðŸ”’"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Security"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm",children:"Manage your password and account access."})]})]}),(0,t.jsxs)("form",{onSubmit:u,className:"space-y-4 max-w-md",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Current Password"}),(0,t.jsx)("input",{type:"password",required:!0,value:l.current,onChange:e=>r({...l,current:e.target.value}),className:"w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"New Password"}),(0,t.jsx)("input",{type:"password",required:!0,minLength:6,value:l.new,onChange:e=>r({...l,new:e.target.value}),className:"w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"Min 6 chars"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Confirm New"}),(0,t.jsx)("input",{type:"password",required:!0,minLength:6,value:l.confirm,onChange:e=>r({...l,confirm:e.target.value}),className:"w-full px-4 py-2.5 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all",placeholder:"Confirm"})]})]}),(0,t.jsx)("button",{type:"submit",disabled:e,className:"w-full py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 disabled:opacity-50 transition-all shadow-lg shadow-blue-200 mt-2",children:e?"Updating...":"Update Password"})]})]}),(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl p-8 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 font-bold text-xl",children:"âš™ï¸"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"System Preferences"}),(0,t.jsx)("p",{className:"text-slate-500 text-sm",children:"Global system configuration."})]})]}),d?(0,t.jsx)("div",{className:"p-8 text-center text-slate-400 animate-pulse",children:"Loading preferences..."}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-slate-800",children:"Maintenance Mode"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Disable access for non-admin users."})]}),(0,t.jsx)("button",{onClick:()=>x("maintenanceMode"),className:`w-12 h-6 rounded-full relative transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${o.maintenanceMode?"bg-blue-600":"bg-slate-300"}`,children:(0,t.jsx)("span",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white shadow ring-0 transition-transform duration-200 ease-in-out ${o.maintenanceMode?"translate-x-6":"translate-x-0"}`})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-slate-800",children:"AI Auto-Scheduler"}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"Automatically generate quizzes at midnight."})]}),(0,t.jsx)("button",{onClick:()=>x("aiAutoScheduler"),className:`w-12 h-6 rounded-full relative transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${o.aiAutoScheduler?"bg-green-500":"bg-slate-300"}`,children:(0,t.jsx)("span",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white shadow ring-0 transition-transform duration-200 ease-in-out ${o.aiAutoScheduler?"translate-x-6":"translate-x-0"}`})})]})]})]})]})}e.s(["default",()=>n])}]);