module.exports=[18642,e=>e.a(async(t,n)=>{try{let t=await e.y("node-cron-850d997d12dc4759");e.n(t),n()}catch(e){n(e)}},!0),99904,e=>{"use strict";var t=e.i(64328);let n=process.env.MONGODB_URI,o=e.g.mongoose;async function s(){if(!n)return console.warn("‚ö†Ô∏è MONGODB_URI is missing. EduQuiz is running in MOCK MODE (localStorage fallback)."),!1;if(o.conn)return o.conn;o.promise||(o.promise=t.default.connect(n,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise,console.log("‚úÖ MongoDB Connected")}catch(e){throw o.promise=null,e}return o.conn}o||(o=e.g.mongoose={conn:null,promise:null}),e.s(["default",0,s])},93538,e=>{"use strict";var t=e.i(64328);let n=new t.Schema({text:{type:String,required:!0},options:[{type:String,required:!0}],answerIndex:{type:Number,required:!0},category:{type:String,required:!0,enum:["Health","Science","Sports","GK","History"],index:!0},level:{type:Number,required:!0,enum:[1,2,3],index:!0},createdAt:{type:Date,default:Date.now,index:!0}}),o=t.models.Question||(0,t.model)("Question",n);e.s(["default",0,o])},72402,e=>{"use strict";var t,n,o,s,i,a,r,l,c,d,u,h,g,f,p,m,y,E,C,I,O,w,_,N;(g=t||(t={})).STRING="string",g.NUMBER="number",g.INTEGER="integer",g.BOOLEAN="boolean",g.ARRAY="array",g.OBJECT="object",(f=n||(n={})).LANGUAGE_UNSPECIFIED="language_unspecified",f.PYTHON="python",(p=o||(o={})).OUTCOME_UNSPECIFIED="outcome_unspecified",p.OUTCOME_OK="outcome_ok",p.OUTCOME_FAILED="outcome_failed",p.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";let S=["user","model","function","system"];(m=s||(s={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",m.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",m.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",m.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",m.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",m.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",(y=i||(i={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",y.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",y.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",y.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",y.BLOCK_NONE="BLOCK_NONE",(E=a||(a={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",E.NEGLIGIBLE="NEGLIGIBLE",E.LOW="LOW",E.MEDIUM="MEDIUM",E.HIGH="HIGH",(C=r||(r={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",C.SAFETY="SAFETY",C.OTHER="OTHER",(I=l||(l={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",I.STOP="STOP",I.MAX_TOKENS="MAX_TOKENS",I.SAFETY="SAFETY",I.RECITATION="RECITATION",I.LANGUAGE="LANGUAGE",I.BLOCKLIST="BLOCKLIST",I.PROHIBITED_CONTENT="PROHIBITED_CONTENT",I.SPII="SPII",I.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",I.OTHER="OTHER",(O=c||(c={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",O.RETRIEVAL_QUERY="RETRIEVAL_QUERY",O.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",O.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",O.CLASSIFICATION="CLASSIFICATION",O.CLUSTERING="CLUSTERING",(w=d||(d={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",w.AUTO="AUTO",w.ANY="ANY",w.NONE="NONE",(_=u||(u={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",_.MODE_DYNAMIC="MODE_DYNAMIC";class T extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class A extends T{constructor(e,t){super(e),this.response=t}}class R extends T{constructor(e,t,n,o){super(e),this.status=t,this.statusText=n,this.errorDetails=o}}class v extends T{}class x extends T{}(N=h||(h={})).GENERATE_CONTENT="generateContent",N.STREAM_GENERATE_CONTENT="streamGenerateContent",N.COUNT_TOKENS="countTokens",N.EMBED_CONTENT="embedContent",N.BATCH_EMBED_CONTENTS="batchEmbedContents";class b{constructor(e,t,n,o,s){this.model=e,this.task=t,this.apiKey=n,this.stream=o,this.requestOptions=s}toString(){var e,t;let n=(null==(e=this.requestOptions)?void 0:e.apiVersion)||"v1beta",o=(null==(t=this.requestOptions)?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",s=`${o}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}async function M(e){var t,n;let o,s=new Headers;s.append("Content-Type","application/json"),s.append("x-goog-api-client",(n=e.requestOptions,o=[],(null==n?void 0:n.apiClient)&&o.push(n.apiClient),o.push("genai-js/0.24.1"),o.join(" "))),s.append("x-goog-api-key",e.apiKey);let i=null==(t=e.requestOptions)?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(e){throw new v(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${e.message}`)}for(let[e,t]of i.entries()){if("x-goog-api-key"===e)throw new v(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new v(`Header name ${e} can only be set using the apiClient field`);s.append(e,t)}}return s}async function $(e,t,n,o,s,i){let a=new b(e,t,n,o,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let n=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}(i)),{method:"POST",headers:await M(a),body:s})}}async function D(e,t,n,o,s,i={},a=fetch){let{url:r,fetchOptions:l}=await $(e,t,n,o,s,i);return G(r,l,a)}async function G(e,t,n=fetch){let o;try{o=await n(e,t)}catch(n){var s=n,i=e;let t=s;throw"AbortError"===t.name?(t=new x(`Request aborted when fetching ${i.toString()}: ${s.message}`)).stack=s.stack:s instanceof R||s instanceof v||((t=new T(`Error fetching from ${i.toString()}: ${s.message}`)).stack=s.stack),t}return o.ok||await H(o,e),o}async function H(e,t){let n,o="";try{let t=await e.json();o=t.error.message,t.error.details&&(o+=` ${JSON.stringify(t.error.details)}`,n=t.error.details)}catch(e){}throw new R(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${o}`,e.status,e.statusText,n)}function L(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),B(e.candidates[0]))throw new A(`${F(e)}`,e);return function(e){var t,n,o,s;let i=[];if(null==(n=null==(t=e.candidates)?void 0:t[0].content)?void 0:n.parts)for(let t of null==(s=null==(o=e.candidates)?void 0:o[0].content)?void 0:s.parts)t.text&&i.push(t.text),t.executableCode&&i.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&i.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}(e)}if(e.promptFeedback)throw new A(`Text not available. ${F(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),B(e.candidates[0]))throw new A(`${F(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),P(e)[0]}if(e.promptFeedback)throw new A(`Function call not available. ${F(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),B(e.candidates[0]))throw new A(`${F(e)}`,e);return P(e)}if(e.promptFeedback)throw new A(`Function call not available. ${F(e)}`,e)},e}function P(e){var t,n,o,s;let i=[];if(null==(n=null==(t=e.candidates)?void 0:t[0].content)?void 0:n.parts)for(let t of null==(s=null==(o=e.candidates)?void 0:o[0].content)?void 0:s.parts)t.functionCall&&i.push(t.functionCall);return i.length>0?i:void 0}let U=[l.RECITATION,l.SAFETY,l.LANGUAGE];function B(e){return!!e.finishReason&&U.includes(e.finishReason)}function F(e){var t,n,o;let s="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)s+="Response was blocked",(null==(t=e.promptFeedback)?void 0:t.blockReason)&&(s+=` due to ${e.promptFeedback.blockReason}`),(null==(n=e.promptFeedback)?void 0:n.blockReasonMessage)&&(s+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null==(o=e.candidates)?void 0:o[0]){let t=e.candidates[0];B(t)&&(s+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(s+=`: ${t.finishMessage}`))}return s}function k(e){return this instanceof k?(this.v=e,this):new k(e)}"function"==typeof SuppressedError&&SuppressedError;let q=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function K(e){let t=[],n=e.getReader();for(;;){let{done:e,value:o}=await n.read();if(e)return L(function(e){let t=e[e.length-1],n={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates){let e=0;for(let o of t.candidates)if(n.candidates||(n.candidates=[]),n.candidates[e]||(n.candidates[e]={index:e}),n.candidates[e].citationMetadata=o.citationMetadata,n.candidates[e].groundingMetadata=o.groundingMetadata,n.candidates[e].finishReason=o.finishReason,n.candidates[e].finishMessage=o.finishMessage,n.candidates[e].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[e].content||(n.candidates[e].content={role:o.content.role||"user",parts:[]});let t={};for(let s of o.content.parts)s.text&&(t.text=s.text),s.functionCall&&(t.functionCall=s.functionCall),s.executableCode&&(t.executableCode=s.executableCode),s.codeExecutionResult&&(t.codeExecutionResult=s.codeExecutionResult),0===Object.keys(t).length&&(t.text=""),n.candidates[e].content.parts.push(t)}e++}t.usageMetadata&&(n.usageMetadata=t.usageMetadata)}return n}(t));t.push(o)}}async function j(e,t,n,o){return function(e){let t,[n,o]=(t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})).getReader(),new ReadableStream({start(e){let n="";return function o(){return t.read().then(({value:t,done:s})=>{let i;if(s)return n.trim()?void e.error(new T("Failed to parse stream")):void e.close();let a=(n+=t).match(q);for(;a;){try{i=JSON.parse(a[1])}catch(t){e.error(new T(`Error parsing JSON response: "${a[1]}"`));return}e.enqueue(i),a=(n=n.substring(a[0].length)).match(q)}return o()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new x("Request aborted when reading from the stream"):new T("Error reading from the stream")})}()}})).tee();return{stream:function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var o,s=n.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){s[e]&&(o[e]=function(t){return new Promise(function(n,o){i.push([e,t,n,o])>1||r(e,t)})})}function r(e,t){try{var n;(n=s[e](t)).value instanceof k?Promise.resolve(n.value.v).then(l,c):d(i[0][2],n)}catch(e){d(i[0][3],e)}}function l(e){r("next",e)}function c(e){r("throw",e)}function d(e,t){e(t),i.shift(),i.length&&r(i[0][0],i[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:n}=yield k(t.read());if(n)break;yield yield k(L(e))}})}(n),response:K(o)}}(await D(t,h.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),o))}async function Y(e,t,n,o){let s=await D(t,h.GENERATE_CONTENT,e,!1,JSON.stringify(n),o);return{response:L(await s.json())}}function J(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)if(!e.role)return{role:"system",parts:e.parts};else return e}}function V(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let n of e)"string"==typeof n?t.push({text:n}):t.push(n);var n=t;let o={role:"user",parts:[]},s={role:"function",parts:[]},i=!1,a=!1;for(let e of n)"functionResponse"in e?(s.parts.push(e),a=!0):(o.parts.push(e),i=!0);if(i&&a)throw new T("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!a)throw new T("No content is provided for sending chat message.");return i?o:s}function W(e){let t;return t=e.contents?e:{contents:[V(e)]},e.systemInstruction&&(t.systemInstruction=J(e.systemInstruction)),t}let Q=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],X={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function z(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;let n=null==(t=e.candidates[0])?void 0:t.content;if(void 0===n||void 0===n.parts||0===n.parts.length)return!1;for(let e of n.parts)if(void 0===e||0===Object.keys(e).length||void 0!==e.text&&""===e.text)return!1;return!0}let Z="SILENT_ERROR";class ee{constructor(e,t,n,o={}){this.model=t,this.params=n,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==n?void 0:n.history)&&(!function(e){let t=!1;for(let n of e){let{role:e,parts:o}=n;if(!t&&"user"!==e)throw new T(`First content should be with role 'user', got ${e}`);if(!S.includes(e))throw new T(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(S)}`);if(!Array.isArray(o))throw new T("Content should have 'parts' property with an array of Parts");if(0===o.length)throw new T("Each Content should have at least one part");let s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let e of o)for(let t of Q)t in e&&(s[t]+=1);let i=X[e];for(let t of Q)if(!i.includes(t)&&s[t]>0)throw new T(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,o,s,i,a,r;let l;await this._sendPromise;let c=V(e),d={safetySettings:null==(n=this.params)?void 0:n.safetySettings,generationConfig:null==(o=this.params)?void 0:o.generationConfig,tools:null==(s=this.params)?void 0:s.tools,toolConfig:null==(i=this.params)?void 0:i.toolConfig,systemInstruction:null==(a=this.params)?void 0:a.systemInstruction,cachedContent:null==(r=this.params)?void 0:r.cachedContent,contents:[...this._history,c]},u=Object.assign(Object.assign({},this._requestOptions),t);return this._sendPromise=this._sendPromise.then(()=>Y(this._apiKey,this.model,d,u)).then(e=>{var t;if(z(e.response)){this._history.push(c);let n=Object.assign({parts:[],role:"model"},null==(t=e.response.candidates)?void 0:t[0].content);this._history.push(n)}else{let t=F(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}l=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,l}async sendMessageStream(e,t={}){var n,o,s,i,a,r;await this._sendPromise;let l=V(e),c={safetySettings:null==(n=this.params)?void 0:n.safetySettings,generationConfig:null==(o=this.params)?void 0:o.generationConfig,tools:null==(s=this.params)?void 0:s.tools,toolConfig:null==(i=this.params)?void 0:i.toolConfig,systemInstruction:null==(a=this.params)?void 0:a.systemInstruction,cachedContent:null==(r=this.params)?void 0:r.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),t),u=j(this._apiKey,this.model,c,d);return this._sendPromise=this._sendPromise.then(()=>u).catch(e=>{throw Error(Z)}).then(e=>e.response).then(e=>{if(z(e)){this._history.push(l);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=F(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==Z&&console.error(e)}),u}}async function et(e,t,n,o){return(await D(t,h.COUNT_TOKENS,e,!1,JSON.stringify(n),o)).json()}async function en(e,t,n,o){return(await D(t,h.EMBED_CONTENT,e,!1,JSON.stringify(n),o)).json()}async function eo(e,t,n,o){let s=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await D(t,h.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:s}),o)).json()}class es{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=J(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;let o=W(e),s=Object.assign(Object.assign({},this._requestOptions),t);return Y(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(n=this.cachedContent)?void 0:n.name},o),s)}async generateContentStream(e,t={}){var n;let o=W(e),s=Object.assign(Object.assign({},this._requestOptions),t);return j(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(n=this.cachedContent)?void 0:n.name},o),s)}startChat(e){var t;return new ee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(t=this.cachedContent)?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){let n=function(e,t){var n;let o={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null==(n=null==t?void 0:t.cachedContent)?void 0:n.name,contents:[]},s=null!=e.generateContentRequest;if(e.contents){if(s)throw new v("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=e.contents}else if(s)o=Object.assign(Object.assign({},o),e.generateContentRequest);else{let t=V(e);o.contents=[t]}return{generateContentRequest:o}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),t);return et(this.apiKey,this.model,n,o)}async embedContent(e,t={}){let n="string"==typeof e||Array.isArray(e)?{content:V(e)}:e,o=Object.assign(Object.assign({},this._requestOptions),t);return en(this.apiKey,this.model,n,o)}async batchEmbedContents(e,t={}){let n=Object.assign(Object.assign({},this._requestOptions),t);return eo(this.apiKey,this.model,e,n)}}let ei=process.env.GEMINI_API_KEY,ea=new class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new T("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new es(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new v("Cached content must contain a `name` field.");if(!e.model)throw new v("Cached content must contain a `model` field.");for(let n of["model","systemInstruction"])if((null==t?void 0:t[n])&&e[n]&&(null==t?void 0:t[n])!==e[n]){if("model"===n&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new v(`Different value for "${n}" specified in modelParams (${t[n]}) and cachedContent (${e[n]})`)}let o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new es(this.apiKey,o,n)}}(ei),er=e=>{let t=1===e?" (Elem)":2===e?" (Inter)":" (High)",n=[];return n.push({text:`Which vitamin comes from sunlight?${t}`,options:["Vitamin A","Vitamin C","Vitamin D","Vitamin B"],answerIndex:2,category:"Health",level:e},{text:`How much water should you drink daily?${t}`,options:["1 Glass","8 Glasses","20 Glasses","None"],answerIndex:1,category:"Health",level:e},{text:`What is good for healthy eyes?${t}`,options:["Carrots","Candy","Burger","Pizza"],answerIndex:0,category:"Health",level:e},{text:`Which organ pumps blood?${t}`,options:["Brain","Lungs","Heart","Kidney"],answerIndex:2,category:"Health",level:e},{text:`Junk food causes?${t}`,options:["Strength","Obesity","Intelligence","Speed"],answerIndex:1,category:"Health",level:e}),n.push({text:`H2O is the chemical formula for?${t}`,options:["Oxygen","Gold","Water","Salt"],answerIndex:2,category:"Science",level:e},{text:`Which planet has rings?${t}`,options:["Mars","Saturn","Venus","Mercury"],answerIndex:1,category:"Science",level:e},{text:`Force is measured in?${t}`,options:["Joules","Newtons","Watts","Meters"],answerIndex:1,category:"Science",level:e},{text:`Plants need what to make food?${t}`,options:["Moonlight","Sunlight","Fire","Ice"],answerIndex:1,category:"Science",level:e},{text:`What is the center of an atom?${t}`,options:["Electron","Proton","Nucleus","Orbit"],answerIndex:2,category:"Science",level:e}),n.push({text:`Who is the 'God of Cricket'?${t}`,options:["Virat Kohli","Sachin Tendulkar","Dhoni","Kapil Dev"],answerIndex:1,category:"Sports",level:e},{text:`Olympics 2024 will be held in?${t}`,options:["Paris","London","Tokyo","Delhi"],answerIndex:0,category:"Sports",level:e},{text:`How many players in a Cricket team?${t}`,options:["10","11","12","9"],answerIndex:1,category:"Sports",level:e},{text:`National game of India (de facto)?${t}`,options:["Cricket","Hockey","Football","Kabaddi"],answerIndex:1,category:"Sports",level:e},{text:`P.V. Sindhu plays which sport?${t}`,options:["Tennis","Badminton","Boxing","Running"],answerIndex:1,category:"Sports",level:e}),n.push({text:`Capital of India?${t}`,options:["Mumbai","Kolkata","New Delhi","Chennai"],answerIndex:2,category:"GK",level:e},{text:`Prime Minister of India (2024)?${t}`,options:["Manmohan Singh","Narendra Modi","Rahul Gandhi","Amit Shah"],answerIndex:1,category:"GK",level:e},{text:`Largest state in India by area?${t}`,options:["Goa","UP","Rajasthan","Maharashtra"],answerIndex:2,category:"GK",level:e},{text:`Currency of India?${t}`,options:["Dollar","Yen","Rupee","Euro"],answerIndex:2,category:"GK",level:e},{text:`National bird of India?${t}`,options:["Peacock","Eagle","Sparrow","Ostrich"],answerIndex:0,category:"GK",level:e}),n.push({text:`Who was the first PM of India?${t}`,options:["Gandhi","Nehru","Patel","Bose"],answerIndex:1,category:"History",level:e},{text:`India got independence in?${t}`,options:["1945","1947","1950","1952"],answerIndex:1,category:"History",level:e},{text:`Who wrote the Constitution?${t}`,options:["Ambedkar","Gandhi","Nehru","Tagore"],answerIndex:0,category:"History",level:e},{text:`Father of the Nation?${t}`,options:["Nehru","Gandhi","Bhagat Singh","Bose"],answerIndex:1,category:"History",level:e},{text:`Ancient university in India?${t}`,options:["Oxford","Nalanda","Cambridge","Harvard"],answerIndex:1,category:"History",level:e}),n};async function el(e,t=200){if(!ei)return console.warn("‚ö†Ô∏è No GEMINI_API_KEY found. Using fallback questions."),er(e);let n=Math.ceil(t/40),o=[];console.log(`Starting Batch Generation for Level ${e}: Need ${t} questions (${n} iterations).`);for(let t=0;t<n;t++)try{console.log(`... Generating batch ${t+1}/${n}`);let s=ea.getGenerativeModel({model:"gemini-1.5-flash"}),i=1===e?"Classes 4 to 6 (Elementary level)":2===e?"Classes 7 and 8 (Intermediate level)":"Classes 9 and 10 (High School level)",a=`
                You are an expert Indian school teacher. Generate exactly 40 unique multiple-choice questions for students in ${i}.
                
                The questions must be divided into exactly 5 categories, with 8 questions each:
                1. Health (Hygiene, Nutrition, Human Body)
                2. Science (Physics, Chemistry, Biology, Space)
                3. Sports (Cricket, Olympics, Indian athletes, Games rules)
                4. GK (Indian politics, Geography, Current Affairs, Capitals)
                5. History (Indian Freedom struggle, Ancient India, World History)
        
                For each question, provide:
                - The question text (Ensure it is UNIQUE from typical generic questions)
                - 4 distinct options
                - The index of the correct answer (0 to 3)
        
                Output the result STRICTLY as a JSON array of objects with the following structure:
                [
                  {
                    "text": "Question text here?",
                    "options": ["Option A", "Option B", "Option C", "Option D"],
                    "answerIndex": 1,
                    "category": "Science",
                    "level": ${e}
                  }
                ]
        
                Do not include any conversational text or markdown code blocks. Just the raw JSON.
            `,r=await s.generateContent(a),l=(await r.response).text().replace(/```json/g,"").replace(/```/g,"").trim(),c=JSON.parse(l);Array.isArray(c)&&(o=[...o,...c]),await new Promise(e=>setTimeout(e,6e4))}catch(e){console.error(`Error in batch ${t+1}:`,e)}return(console.log(`Completed Batch Generation. Total Questions: ${o.length}`),0===o.length)?er(e):o}e.s(["generateBatchQuestions",()=>el],72402)},92453,e=>e.a(async(t,n)=>{try{var o=e.i(18642),s=e.i(99904),i=e.i(93538),a=e.i(72402),r=t([o]);function l(){console.log("‚è∞ Initializing Daily Question Cron Job..."),o.default.schedule("0 4 * * *",async()=>{console.log("üîÑ STARTING DAILY QUESTION REGENERATION (4:00 AM)...");try{await (0,s.default)();let e=[],t=!0;for(let n of[1,2,3]){console.log(`üöÄ Generating questions for Level ${n}...`);let o=await (0,a.generateBatchQuestions)(n,150);if(o&&o.length>0)e.push(...o),console.log(`‚úÖ Generated ${o.length} questions for Level ${n}.`);else{console.error(`‚ùå Failed to generate questions for Level ${n}.`),t=!1;break}}t&&e.length>=400?(console.log("üßπ Clearing old questions..."),await i.default.deleteMany({}),console.log("‚úÖ Old questions cleared."),await i.default.insertMany(e),console.log(`‚úÖ Successfully seeded ${e.length} new questions.`),console.log("‚ú® DAILY QUESTION REGENERATION COMPLETE! ‚ú®")):(console.error("‚ùå Generation incomplete. Keeping old questions to prevent empty database."),console.error(`Generated: ${e.length}/450 questions. Minimum required: 400.`))}catch(e){console.error("‚ùå CRON JOB FAILED:",e),console.error("‚ö†Ô∏è Old questions preserved to keep platform operational.")}}),setTimeout(async()=>{try{await (0,s.default)();let e=await i.default.countDocuments();if(0===e){for(let e of(console.log("‚ö†Ô∏è Database empty on startup. Triggering full AI generation (450 questions)..."),[1,2,3])){console.log(`... Startup Generation for Level ${e}`);let t=await (0,a.generateBatchQuestions)(e,150);t&&t.length>0&&await i.default.insertMany(t)}console.log("‚úÖ Plug-and-Play startup seeding complete.")}else console.log(`üìä DB Check: ${e} questions found. No emergency seeding needed.`)}catch(e){console.error("Startup check failed:",e)}},5e3)}[o]=r.then?(await r)():r,e.s(["initCronJob",()=>l]),n()}catch(e){n(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__33e7bb4a._.js.map