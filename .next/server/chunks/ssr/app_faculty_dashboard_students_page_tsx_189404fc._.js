module.exports=[74919,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23292);function e(){let[a,e]=(0,c.useState)("EQ"),[f,g]=(0,c.useState)("Vajra International"),[h,i]=(0,c.useState)({name:"",idNo:"",age:"",class:"",password:""}),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(new Set);(0,c.useEffect)(()=>{(async()=>{let a=localStorage.getItem("faculty_session"),b=a?JSON.parse(a):null;if(b)try{let a=await fetch(`/api/faculty/profile?facultyId=${b.id}`),c=await a.json();if(!a.ok||!c.isProfileActive){q(!1),s(!1);return}e(c.uniqueId),g(c.schoolName);let d=await fetch(`/api/students?facultyId=${b.id}`),f=await d.json();Array.isArray(f)&&o(f)}catch(a){console.error("Fetch error",a)}s(!1)})()},[]);let v=async c=>{if(c.preventDefault(),!h.name.trim())return void d.toast.error("Student Name is required");if(!h.age||5>parseInt(h.age)||parseInt(h.age)>25)return void d.toast.error("Please enter a valid age (5-25)");if(!h.class)return void d.toast.error("Please select a class");let e=localStorage.getItem("faculty_session"),g=e?JSON.parse(e):null;try{if(j){h.idNo.toUpperCase();let a=await fetch("/api/students",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:j,...h})}),b=await a.json();if(!a.ok)return void d.toast.error(b.error||"Update failed");o(n.map(a=>a._id===j?b.student:a)),k(null),d.toast.success("Student updated successfully!")}else{let c=await fetch("/api/students",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,school:f,facultyId:g?.id,prefix:a})}),e=await c.json();if(!c.ok)return void d.toast.error(e.error||"Enrollment failed");o([e.student,...n]),d.toast.success((0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"font-bold text-base",children:"Student Enrolled!"}),(0,b.jsxs)("div",{className:"bg-slate-100 p-2 rounded text-slate-800 font-mono text-sm",children:[(0,b.jsxs)("div",{children:["ID: ",(0,b.jsx)("span",{className:"font-bold",children:e.credentials.idNo})]}),(0,b.jsxs)("div",{children:["Pass: ",(0,b.jsx)("span",{className:"font-bold",children:e.credentials.password})]})]}),(0,b.jsx)("p",{className:"text-xs",children:"Credentials copied to clipboard"})]}),{duration:1e4}),navigator.clipboard.writeText(`EduQuiz Login
ID: ${e.credentials.idNo}
Password: ${e.credentials.password}`)}i({name:"",idNo:"",age:"",class:"",password:""})}catch(a){d.toast.error("Something went wrong")}},w=async a=>{if(confirm("Are you sure you want to delete this student?"))try{(await fetch(`/api/students?id=${a}`,{method:"DELETE"})).ok?(o(n.filter(b=>b._id!==a)),d.toast.success("Student deleted successfully")):d.toast.error("Failed to delete")}catch(a){d.toast.error("Error deleting student")}};return r?(0,b.jsx)("div",{className:"p-10 text-center font-bold text-slate-400",children:"Loading activation status..."}):p?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"bg-white p-8 rounded-3xl border border-slate-100 shadow-sm",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,b.jsx)("span",{children:j?"âœï¸":"ðŸ“"})," ",j?"Edit Student Details":"Enroll New Student"]}),(0,b.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",onSubmit:v,children:[(0,b.jsxs)("div",{className:"col-span-1 md:col-span-3 bg-blue-50 border border-blue-100 p-4 rounded-xl flex items-start gap-3",children:[(0,b.jsx)("div",{className:"text-2xl",children:"â„¹ï¸"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-blue-900 text-sm",children:"Automatic Enrollment"}),(0,b.jsxs)("p",{className:"text-blue-700 text-xs mt-1",children:["Student ID and Password will be ",(0,b.jsx)("strong",{children:"automatically generated"})," upon enrollment. You will be able to copy the credentials immediately after registration."]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Student Name"}),(0,b.jsx)("input",{type:"text",required:!0,value:h.name,onChange:a=>i({...h,name:a.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Rahul Sharma"})]}),j?(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"ID No."}),(0,b.jsx)("input",{type:"text",disabled:!0,value:h.idNo,className:"w-full px-4 py-2 bg-slate-100 border border-slate-200 rounded-xl text-slate-500 font-mono cursor-not-allowed"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"ID No."}),(0,b.jsxs)("div",{className:"w-full px-4 py-2 bg-slate-100 border border-slate-200 rounded-xl text-slate-400 italic",children:["Auto-generated (",a,"-YYYY-XXX)"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Age"}),(0,b.jsx)("input",{type:"number",required:!0,value:h.age,onChange:a=>i({...h,age:a.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"15"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Class"}),(0,b.jsxs)("select",{required:!0,value:h.class,onChange:a=>i({...h,class:a.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none font-bold text-slate-700",children:[(0,b.jsx)("option",{value:"",children:"Select Class"}),(0,b.jsx)("option",{children:"4th"}),(0,b.jsx)("option",{children:"5th"}),(0,b.jsx)("option",{children:"6th"}),(0,b.jsx)("option",{children:"7th"}),(0,b.jsx)("option",{children:"8th"}),(0,b.jsx)("option",{children:"9th"}),(0,b.jsx)("option",{children:"10th"})]})]})]}),j&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Reset Password (Optional)"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("input",{type:l?"text":"password",value:h.password,onChange:a=>i({...h,password:a.target.value}),className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none pr-12 transition-all font-mono",placeholder:"Enter new password",autoComplete:"new-password"}),(0,b.jsx)("button",{type:"button",onClick:()=>m(!l),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all z-10",title:l?"Hide":"Show",children:l?(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l18 18"})}):(0,b.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-3 flex justify-end gap-3",children:[j&&(0,b.jsx)("button",{type:"button",onClick:()=>{k(null),i({name:"",idNo:"",age:"",class:"",password:""})},className:"px-6 py-3 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-all",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-8 py-3 bg-blue-700 text-white font-bold rounded-xl hover:bg-blue-800 transition-all shadow-lg hover:shadow-blue-200 active:scale-[0.98]",children:j?"Update Student":"Generate & Register"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-3xl border border-slate-100 shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-8 border-b",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Enrolled Students"}),(0,b.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"Manage and track your enrolled students for the current session."})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-slate-50",children:[(0,b.jsx)("th",{className:"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Name"}),(0,b.jsx)("th",{className:"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"School"}),(0,b.jsx)("th",{className:"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Class"}),(0,b.jsx)("th",{className:"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"ID"}),(0,b.jsx)("th",{className:"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Password"}),(0,b.jsx)("th",{className:"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Status"}),(0,b.jsx)("th",{className:"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-100",children:n.map((c,d)=>(0,b.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[(0,b.jsx)("td",{className:"px-8 py-4",children:(0,b.jsx)("div",{className:"font-bold text-slate-800",children:c.name})}),(0,b.jsx)("td",{className:"px-8 py-4 text-slate-600",children:c.school}),(0,b.jsx)("td",{className:"px-8 py-4",children:(0,b.jsx)("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-lg font-bold text-xs",children:c.class})}),(0,b.jsx)("td",{className:"px-8 py-4 font-mono text-sm text-blue-600 font-bold",children:c.idNo.includes("-")?c.idNo:`${a}-${c.idNo}`}),(0,b.jsx)("td",{className:"px-8 py-4 font-mono text-sm text-slate-600 font-bold",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{children:t.has(c._id)?c.displayPassword||"******** (Protected)":"â€¢â€¢â€¢â€¢â€¢â€¢"}),(0,b.jsx)("button",{onClick:()=>{var a;let b;return a=c._id,void((b=new Set(t)).has(a)?b.delete(a):b.add(a),u(b))},className:`p-1.5 rounded-lg transition-all border ${t.has(c._id)?"bg-blue-600 text-white border-blue-700":"bg-slate-50 text-slate-500 hover:text-blue-700 hover:bg-blue-50 border-slate-200"}`,title:t.has(c._id)?"Hide Password":"Show Password",children:t.has(c._id)?(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l18 18"})}):(0,b.jsxs)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})}),(0,b.jsx)("td",{className:"px-8 py-4",children:(0,b.jsx)("span",{className:`px-3 py-1 text-[10px] font-black uppercase rounded-full ${"Active"===c.status?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:c.status})}),(0,b.jsxs)("td",{className:"px-8 py-4 text-right flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>!c.hasAttempted&&void(k(c._id),i({name:c.name,idNo:c.idNo,age:c.age||"",class:c.class,password:""}),window.scrollTo({top:0,behavior:"smooth"})),disabled:c.hasAttempted,className:`p-2 rounded-lg transition-colors ${c.hasAttempted?"text-slate-300 cursor-not-allowed":"text-blue-600 hover:bg-blue-50"}`,title:c.hasAttempted?"Cannot edit: Student has already started/finished the exam for today. This prevents results from being corrupted.":"Edit Details",children:"âœï¸"}),(0,b.jsx)("button",{onClick:()=>w(c._id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:"ðŸ—‘ï¸"})]})]},c.idNo+d))})]})})]})]}):(0,b.jsxs)("div",{className:"bg-white p-12 rounded-[40px] border-2 border-dashed border-slate-200 text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-6",children:"ðŸ”’"}),(0,b.jsx)("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"School Profile Not Activated"}),(0,b.jsx)("p",{className:"text-slate-500 mb-8 font-medium",children:"Please configure your School Name and Unique ID in the Profile section before you can enroll students."}),(0,b.jsx)("a",{href:"/faculty/dashboard/profile",className:"px-8 py-3 bg-blue-700 text-white font-black rounded-xl hover:bg-blue-800 transition-all",children:"Go to Profile Setup"})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_faculty_dashboard_students_page_tsx_189404fc._.js.map