{"version":3,"sources":["../../../../app/faculty/dashboard/results/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\n\nexport default function TopResults() {\n    const [topStudents, setTopStudents] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchResults = async () => {\n            try {\n                const session = localStorage.getItem(\"faculty_session\");\n                const faculty = session ? JSON.parse(session) : null;\n                const facultyQuery = faculty ? `?facultyId=${faculty.id}` : \"\";\n\n                // Fetch filtered results for this school\n                const res = await fetch(`/api/quiz/submit${facultyQuery}`);\n                let data = await res.json();\n\n                if (Array.isArray(data)) {\n                    // Sort by score (desc) and date \n                    data.sort((a: any, b: any) => b.score - a.score);\n                    // Add Rank\n                    data = data.map((item: any, index: number) => ({\n                        ...item,\n                        rank: index + 1,\n                        prize: index < 3 ? \"Gadget + Voucher\" : \"Voucher\",\n                        name: item.name || \"Student \" + item.idNo\n                    }));\n                    setTopStudents(data.slice(0, 100));\n                }\n            } catch (error) {\n                console.error(\"Error fetching results\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchResults();\n    }, []);\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"bg-gradient-to-r from-blue-900 to-indigo-900 rounded-3xl p-10 text-white relative overflow-hidden\">\n                <div className=\"absolute top-0 right-0 p-4 opacity-10\">\n                    <svg className=\"w-64 h-64\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14l-5-4.87 6.91-1.01L12 2z\" /></svg>\n                </div>\n                <div className=\"relative z-10 max-w-2xl\">\n                    <h2 className=\"text-4xl font-black mb-4 tracking-tight\">Today's Hall of Fame</h2>\n                    <p className=\"text-blue-200 text-lg leading-relaxed mb-8\">\n                        These are the top 100 students selected for rewards based on today's quiz performance. Results update every day at 8:30 PM.\n                    </p>\n                    <div className=\"flex gap-4\">\n                        <div className=\"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full border border-white/10\">\n                            <span className=\"text-yellow-400\">ðŸ“…</span>\n                            <span className=\"text-sm font-bold\">{new Date().toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' })}</span>\n                        </div>\n                        <div className=\"flex items-center gap-2 bg-white/10 px-4 py-2 rounded-full border border-white/10\">\n                            <span className=\"text-yellow-400\">ðŸŽ¯</span>\n                            <span className=\"text-sm font-bold\">Session #482</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"bg-white rounded-3xl border border-slate-100 shadow-sm overflow-hidden\">\n                <div className=\"p-8 border-b flex justify-between items-center\">\n                    <div>\n                        <h3 className=\"text-xl font-bold text-slate-900\">Top 100 Rankers</h3>\n                        <p className=\"text-slate-500 text-sm mt-1\">Filtered by highest score and fastest completion time.</p>\n                    </div>\n                    <button className=\"px-4 py-2 bg-blue-50 text-blue-700 text-sm font-bold rounded-lg hover:bg-blue-100 transition-colors\">\n                        Download PDF Report\n                    </button>\n                </div>\n                <div className=\"overflow-x-auto\">\n                    <table className=\"w-full text-left border-collapse\">\n                        <thead>\n                            <tr className=\"bg-slate-50\">\n                                <th className=\"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest\">Rank</th>\n                                <th className=\"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest\">Student</th>\n                                <th className=\"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest\">Score</th>\n                                <th className=\"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest\">Time</th>\n                                <th className=\"px-8 py-4 text-xs font-bold text-slate-500 uppercase tracking-widest\">Estimated Prize</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"divide-y divide-slate-100\">\n                            {topStudents.map((student) => (\n                                <tr key={student.rank} className=\"hover:bg-slate-50/50 transition-colors\">\n                                    <td className=\"px-8 py-6\">\n                                        <span className={`w-8 h-8 flex items-center justify-center rounded-full font-black text-sm ${student.rank === 1 ? 'bg-yellow-100 text-yellow-800' :\n                                            student.rank === 2 ? 'bg-slate-200 text-slate-800' :\n                                                student.rank === 3 ? 'bg-orange-100 text-orange-800' :\n                                                    'bg-slate-50 text-slate-500'\n                                            }`}>\n                                            {student.rank}\n                                        </span>\n                                    </td>\n                                    <td className=\"px-8 py-6\">\n                                        <div className=\"font-bold text-slate-800\">{student.name}</div>\n                                        <div className=\"text-xs text-slate-500 font-medium\">{student.school}</div>\n                                    </td>\n                                    <td className=\"px-8 py-6\">\n                                        <div className=\"flex items-center gap-2\">\n                                            <span className=\"font-black text-blue-700\">{student.score}/25</span>\n                                            {student.score === 25 && <span className=\"text-lg\">ðŸ”¥</span>}\n                                        </div>\n                                    </td>\n                                    <td className=\"px-8 py-6 text-slate-600 font-bold text-sm\">\n                                        {student.idNo}\n                                    </td>\n                                    <td className=\"px-8 py-6\">\n                                        <span className={`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-tighter ${student.rank <= 3 ? 'bg-purple-100 text-purple-700' : 'bg-green-100 text-green-700'\n                                            }`}>\n                                            {student.prize}\n                                        </span>\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACpB,GAAM,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAQ,EAAE,EAClD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAkCvC,MAhCA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KA6BN,CA5BqB,UACjB,GAAI,CACA,IAAM,EAAU,aAAa,OAAO,CAAC,mBAC/B,EAAU,EAAU,KAAK,KAAK,CAAC,GAAW,KAC1C,EAAe,EAAU,CAAC,WAAW,EAAE,EAAQ,EAAE,CAAA,CAAE,CAAG,GAGtD,EAAM,MAAM,MAAM,CAAC,gBAAgB,EAAE,EAAA,CAAc,EACrD,EAAO,MAAM,EAAI,IAAI,GAErB,MAAM,OAAO,CAAC,KAEd,EAFqB,AAEhB,IAAI,CAAC,CAAC,EAAQ,IAAW,EAAE,KAAK,CAAG,EAAE,KAAK,EAE/C,EAAO,EAAK,GAAG,CAAC,CAAC,EAAW,KAAmB,CAC3C,EAD0C,CACvC,CAAI,CACP,KAAM,EAAQ,EACd,MAAO,EAAQ,EAAI,mBAAqB,UACxC,KAAM,EAAK,IAAI,EAAI,WAAa,EAAK,IAAI,CAC7C,CAAC,EACD,EAAe,EAAK,KAAK,CAAC,EAAG,MAErC,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,yBAA0B,EAC5C,QAAU,CACN,GAAW,EACf,EACJ,GAEJ,EAAG,EAAE,EAGD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8GACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,YAAY,KAAK,eAAe,QAAQ,qBAAY,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,sGAE/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mDAA0C,yBACxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDAA6C,gIAG1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8FACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,2BAAkB,OAClC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6BAAqB,IAAI,OAAO,kBAAkB,CAAC,QAAS,CAAE,IAAK,UAAW,MAAO,QAAS,KAAM,SAAU,QAElI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8FACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,2BAAkB,OAClC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6BAAoB,6BAMpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mFACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,4CAAmC,oBACjD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA8B,8DAE/C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,+GAAsG,2BAI5H,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACG,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wBACV,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gFAAuE,SACrF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gFAAuE,YACrF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gFAAuE,UACrF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gFAAuE,SACrF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gFAAuE,yBAG7F,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,qCACZ,EAAY,GAAG,CAAC,AAAC,GACd,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAsB,UAAU,mDAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,yEAAyE,EAAmB,IAAjB,EAAQ,IAAI,CAAS,gCAC7F,IAAjB,EAAQ,IAAI,CAAS,8BACA,IAAjB,EAAQ,IAAI,CAAS,gCACjB,6BAAA,CACN,UACD,EAAQ,IAAI,KAGrB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,sBACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCAA4B,EAAQ,IAAI,GACvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8CAAsC,EAAQ,MAAM,MAEvE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,qCAA4B,EAAQ,KAAK,CAAC,SACvC,KAAlB,EAAQ,KAAK,EAAW,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,YAG3D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sDACT,EAAQ,IAAI,GAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,2EAA2E,EAAE,EAAQ,IAAI,EAAI,EAAI,gCAAkC,8BAAA,CAC/I,UACD,EAAQ,KAAK,OA1BjB,EAAQ,IAAI,eAqCrD"}