{"version":3,"sources":["../../../../app/admin/faculty/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useMemo } from \"react\";\nimport { toast } from \"sonner\";\n\ninterface Faculty {\n    _id: string;\n    name: string;\n    email: string;\n    schoolName: string;\n    phone: string;\n    isProfileActive: boolean;\n    createdAt: string;\n}\n\nexport default function AdminFaculty() {\n    const [facultyList, setFacultyList] = useState<Faculty[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    // Filters State\n    const [search, setSearch] = useState(\"\");\n    const [filterStatus, setFilterStatus] = useState(\"\");\n\n    const fetchFaculty = async () => {\n        try {\n            const res = await fetch(\"/api/admin/faculty\");\n            if (res.ok) {\n                const data = await res.json();\n                setFacultyList(data.faculty);\n            } else {\n                toast.error(\"Failed to load faculty\");\n            }\n        } catch (error) {\n            toast.error(\"Error connecting to server\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const toggleStatus = async (id: string, currentStatus: boolean) => {\n        try {\n            const res = await fetch(\"/api/admin/faculty\", {\n                method: \"PATCH\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ id, isProfileActive: !currentStatus }),\n            });\n\n            if (res.ok) {\n                toast.success(currentStatus ? \"Faculty deactivated\" : \"Faculty approved\");\n                // Optimistic update\n                setFacultyList(prev => prev.map(f =>\n                    f._id === id ? { ...f, isProfileActive: !currentStatus } : f\n                ));\n            } else {\n                throw new Error(\"Update failed\");\n            }\n        } catch (error) {\n            toast.error(\"Action failed\");\n        }\n    };\n\n    useEffect(() => {\n        fetchFaculty();\n    }, []);\n\n    const filteredFaculty = facultyList.filter(f => {\n        const term = search.toLowerCase();\n        const matchesSearch =\n            f.name.toLowerCase().includes(term) ||\n            f.email.toLowerCase().includes(term) ||\n            f.schoolName.toLowerCase().includes(term);\n\n        const matchesStatus = filterStatus ? (\n            filterStatus === \"active\" ? f.isProfileActive : !f.isProfileActive\n        ) : true;\n\n        return matchesSearch && matchesStatus;\n    });\n\n    const clearFilters = () => {\n        setSearch(\"\");\n        setFilterStatus(\"\");\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                <h1 className=\"text-3xl font-bold text-slate-900\">Faculty Management</h1>\n\n                <div className=\"flex flex-wrap items-center gap-3\">\n\n                    {/* Status Filter */}\n                    <div className=\"relative\">\n                        <select\n                            value={filterStatus}\n                            onChange={(e) => setFilterStatus(e.target.value)}\n                            className=\"appearance-none pl-4 pr-10 py-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-slate-700 font-medium cursor-pointer hover:border-blue-400 transition-colors w-36\"\n                        >\n                            <option value=\"\">All Status</option>\n                            <option value=\"active\">Active</option>\n                            <option value=\"pending\">Pending</option>\n                        </select>\n                        <div className=\"absolute right-3 top-3 pointer-events-none text-slate-500 text-xs\">‚ñº</div>\n                    </div>\n\n                    {/* Search */}\n                    <div className=\"relative\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"Name, Email or School...\"\n                            value={search}\n                            onChange={(e) => setSearch(e.target.value)}\n                            className=\"pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none w-72 shadow-sm\"\n                        />\n                        <span className=\"absolute left-3 top-2.5 text-slate-400\">üîç</span>\n                    </div>\n\n                    {(search || filterStatus) && (\n                        <button\n                            onClick={clearFilters}\n                            className=\"px-4 py-2 text-sm font-bold text-red-500 bg-red-50 hover:bg-red-100 rounded-lg transition-colors border border-red-200\"\n                        >\n                            Clear\n                        </button>\n                    )}\n                </div>\n            </div>\n\n            <div className=\"bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm\">\n                <div className=\"overflow-x-auto\">\n                    <table className=\"w-full text-left\">\n                        <thead className=\"bg-slate-50 border-b border-slate-200 text-slate-500 font-bold uppercase text-xs hover:bg-slate-100 transition-colors\">\n                            <tr>\n                                <th className=\"px-6 py-4\">Name & Reg Date</th>\n                                <th className=\"px-6 py-4\">School</th>\n                                <th className=\"px-6 py-4\">Contact Details</th>\n                                <th className=\"px-6 py-4\">Status</th>\n                                <th className=\"px-6 py-4 text-right\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"divide-y divide-slate-100\">\n                            {loading ? (\n                                <tr><td colSpan={5} className=\"px-6 py-12 text-center text-slate-500 animate-pulse\">Loading faculty...</td></tr>\n                            ) : filteredFaculty.length === 0 ? (\n                                <tr><td colSpan={5} className=\"px-6 py-12 text-center text-slate-500\">\n                                    No faculty found matching your filters.\n                                </td></tr>\n                            ) : (\n                                filteredFaculty.map(faculty => (\n                                    <tr key={faculty._id} className=\"hover:bg-blue-50/50 transition-colors group\">\n                                        <td className=\"px-6 py-4\">\n                                            <div className=\"font-bold text-slate-900\">{faculty.name}</div>\n                                            <div className=\"text-xs text-slate-400 mt-1 font-mono\">\n                                                {new Date(faculty.createdAt).toLocaleDateString()}\n                                            </div>\n                                        </td>\n                                        <td className=\"px-6 py-4 text-slate-600 font-medium\">\n                                            <div className=\"truncate max-w-[200px]\" title={faculty.schoolName}>\n                                                {faculty.schoolName}\n                                            </div>\n                                        </td>\n                                        <td className=\"px-6 py-4 text-slate-600\">\n                                            <div className=\"flex items-center gap-2\">\n                                                <span className=\"text-xs font-bold bg-slate-100 px-1.5 py-0.5 rounded text-slate-500\">EMAIL</span>\n                                                <span className=\"text-sm\">{faculty.email}</span>\n                                            </div>\n                                            <div className=\"flex items-center gap-2 mt-1\">\n                                                <span className=\"text-xs font-bold bg-slate-100 px-1.5 py-0.5 rounded text-slate-500\">PH</span>\n                                                <span className=\"text-sm font-mono\">{faculty.phone}</span>\n                                            </div>\n                                        </td>\n                                        <td className=\"px-6 py-4\">\n                                            <span className={`px-2.5 py-1 rounded-full text-xs font-bold inline-flex items-center gap-1.5 ${faculty.isProfileActive\n                                                ? 'bg-emerald-100 text-emerald-700'\n                                                : 'bg-amber-100 text-amber-700'\n                                                }`}>\n                                                <span className={`w-1.5 h-1.5 rounded-full ${faculty.isProfileActive ? 'bg-emerald-500' : 'bg-amber-500 animate-pulse'}`}></span>\n                                                {faculty.isProfileActive ? 'Active' : 'Pending'}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 text-right\">\n                                            <button\n                                                onClick={() => toggleStatus(faculty._id, faculty.isProfileActive)}\n                                                className={`px-3 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all shadow-sm ${faculty.isProfileActive\n                                                    ? 'bg-white border border-slate-200 text-slate-500 hover:bg-slate-50 hover:text-red-500 hover:border-red-200'\n                                                    : 'bg-emerald-600 text-white hover:bg-emerald-700 hover:shadow-emerald-200'\n                                                    }`}\n                                            >\n                                                {faculty.isProfileActive ? 'Deactivate' : 'Approve'}\n                                            </button>\n                                        </td>\n                                    </tr>\n                                ))\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n\n            <div className=\"text-right text-xs text-slate-400 font-medium\">\n                Showing {filteredFaculty.length} of {facultyList.length} faculty members\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAYe,SAAS,IACpB,GAAM,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,EAAE,EACtD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGjC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAE3C,EAAe,UACjB,GAAI,CACA,IAAM,EAAM,MAAM,MAAM,sBACxB,GAAI,EAAI,EAAE,CAAE,CACR,IAAM,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAe,EAAK,OAAO,CAC/B,MACI,CADG,CACH,KAAK,CAAC,KAAK,CAAC,yBAEpB,CAAE,MAAO,EAAO,CACZ,EAAA,KAAK,CAAC,KAAK,CAAC,6BAChB,QAAU,CACN,GAAW,EACf,CACJ,EAEM,EAAe,MAAO,EAAY,KACpC,GAAI,CAOA,GAAI,CANQ,MAAM,MAAM,qBAAsB,CAC1C,OAAQ,QACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,IAAE,EAAI,gBAAiB,CAAC,CAAc,EAC/D,EAAA,EAEQ,EAAE,CACN,CADQ,CACR,KAAK,CAAC,OAAO,CAAC,EAAgB,sBAAwB,oBAEtD,EAAe,GAAQ,EAAK,GAAG,CAAC,GAC5B,EAAE,GAAG,GAAK,EAAK,CAAE,GAAG,CAAC,CAAE,gBAAiB,CAAC,CAAc,EAAI,SAG/D,MAAM,AAAI,MAAM,gBAExB,CAAE,MAAO,EAAO,CACZ,EAAA,KAAK,CAAC,KAAK,CAAC,gBAChB,CACJ,EAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACN,GACJ,EAAG,EAAE,EAEL,IAAM,EAAkB,EAAY,MAAM,CAAC,IACvC,IAAM,EAAO,EAAO,WAAW,GACzB,EACF,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,IAC9B,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,IAC/B,EAAE,UAAU,CAAC,WAAW,GAAG,QAAQ,CAAC,GAElC,GAAgB,IACD,WAAjB,EAA4B,EAAE,eAAe,CAAG,CAAC,EAAE,eAAA,AAAe,EAGtE,CAFI,MAEG,GAAiB,CAC5B,GAOA,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4EACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CAAoC,uBAElD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CAGX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACX,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,MAAO,EACP,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,UAAU,+NAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,eACjB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,kBAAS,WACvB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,mBAAU,eAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6EAAoE,SAIvF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACX,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,OACL,YAAY,2BACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAU,EAAE,MAAM,CAAC,KAAK,EACzC,UAAU,sHAEd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kDAAyC,UAG5D,AAAC,IAAU,CAAA,CAAY,EACpB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAxCH,CAwCY,IAvC7B,EAAU,IACV,EAAgB,GACpB,EAsCwB,UAAU,kIACb,gBAOb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iFACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,iIACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,oBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,WAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,oBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,WAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gCAAuB,iBAG7C,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,qCACZ,EACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,EAAG,UAAU,+DAAsD,yBACpF,AAA2B,MAAX,MAAM,CACtB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,QAAS,EAAG,UAAU,iDAAwC,8CAItE,EAAgB,GAAG,CAAC,GAChB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAqB,UAAU,wDAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,sBACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCAA4B,EAAQ,IAAI,GACvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACV,IAAI,KAAK,EAAQ,SAAS,EAAE,kBAAkB,QAGvD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gDACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAyB,MAAO,EAAQ,UAAU,UAC5D,EAAQ,UAAU,KAG3B,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,qCACV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+EAAsE,UACtF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAW,EAAQ,KAAK,MAE5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+EAAsE,OACtF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6BAAqB,EAAQ,KAAK,SAG1D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACV,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAW,CAAC,4EAA4E,EAAE,EAAQ,eAAe,CACjH,kCACA,8BAAA,CACA,WACF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,yBAAyB,EAAE,EAAQ,eAAe,CAAG,iBAAmB,6BAAA,CAA8B,GACvH,EAAQ,eAAe,CAAG,SAAW,eAG9C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,gCACV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAa,EAAQ,GAAG,CAAE,EAAQ,eAAe,EAChE,UAAW,CAAC,2FAA2F,EAAE,EAAQ,eAAe,CAC1H,4GACA,0EAAA,CACA,UAEL,EAAQ,eAAe,CAAG,aAAe,gBAvC7C,EAAQ,GAAG,YAkD5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0DAAgD,WAClD,EAAgB,MAAM,CAAC,OAAK,EAAY,MAAM,CAAC,wBAIxE"}