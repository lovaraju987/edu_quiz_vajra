{"version":3,"sources":["../../../../app/lib/constants.ts","../../../../app/admin/directory/page.tsx"],"sourcesContent":["export const MENU_ITEMS = [\n    { href: \"/private-schools-play\", label: \"Private schools (Play)\" },\n    { href: \"/private-schools-daycare\", label: \"Private schools (Day care)\" },\n    { href: \"/private-schools-kinder\", label: \"Private schools (Kinder Garden)\" },\n    { href: \"/private-schools-primary\", label: \"Private schools (Primary)\" },\n    { href: \"/private-schools-secondary\", label: \"Private schools (Secondary)\" },\n    { href: \"/tuition-centers\", label: \"Tuition Centers\" },\n    { href: \"/home-tutors\", label: \"Home Tutions (tutors)\" },\n    { href: \"/online-tutors\", label: \"Online Tutors\" },\n    { href: \"/child-psychologist\", label: \"Child Psychologist\" },\n    { href: \"/pediatric-doctors\", label: \"Pediatric Doctors & Hospitals\" },\n    { href: \"/book-publishers\", label: \"Book Publishers\" },\n    { href: \"/book-stalls\", label: \"Book Stalls\" },\n    { href: \"/electronic-gadgets\", label: \"Electronic Gadgets (Stud)\" },\n\n    { href: \"/sports-fitness\", label: \"Sports & Fitness centers\" },\n    { href: \"/music-dance\", label: \"Music & Dance schools\" },\n];\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { toast } from \"sonner\";\nimport { MENU_ITEMS } from \"@/app/lib/constants\";\n\ninterface School {\n    _id: string;\n    name: string;\n    category: string;\n    address: string;\n    principalName: string;\n    phone: string;\n}\n\nexport default function AdminSchoolsPage() {\n    const [schools, setSchools] = useState<School[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [selectedCategory, setSelectedCategory] = useState<string>(\"\");\n\n    useEffect(() => {\n        fetchSchools();\n    }, [selectedCategory]);\n\n    const fetchSchools = async () => {\n        try {\n            setLoading(true);\n            const url = selectedCategory\n                ? `/api/schools?category=${selectedCategory}`\n                : \"/api/schools\";\n            const res = await fetch(url);\n            const data = await res.json();\n\n            if (data.success) {\n                setSchools(data.data);\n            } else {\n                toast.error(data.error || \"Failed to fetch schools\");\n            }\n        } catch (error) {\n            toast.error(\"An error occurred while fetching schools\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleDelete = async (id: string) => {\n        if (!confirm(\"Are you sure you want to delete this school?\")) return;\n\n        try {\n            const res = await fetch(`/api/schools/${id}`, {\n                method: \"DELETE\",\n            });\n            const data = await res.json();\n\n            if (data.success) {\n                toast.success(\"School deleted successfully\");\n                fetchSchools();\n            } else {\n                toast.error(data.error || \"Failed to delete school\");\n            }\n        } catch (error) {\n            toast.error(\"An error occurred while deleting\");\n        }\n    };\n\n    return (\n        <div className=\"p-8\">\n            <div className=\"flex justify-between items-center mb-6\">\n                <h1 className=\"text-2xl font-bold text-gray-800\">Educational Directory</h1>\n                <Link\n                    href=\"/admin/directory/new\"\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition\"\n                >\n                    Add Institution\n                </Link>\n            </div>\n\n            <div className=\"mb-6\">\n                <select\n                    value={selectedCategory}\n                    onChange={(e) => setSelectedCategory(e.target.value)}\n                    className=\"p-2 border rounded-lg w-full max-w-md\"\n                >\n                    <option value=\"\">All Categories</option>\n                    {MENU_ITEMS.map((item) => (\n                        <option key={item.href} value={item.href.replace(\"/\", \"\")}>\n                            {item.label}\n                        </option>\n                    ))}\n                </select>\n            </div>\n\n            {loading ? (\n                <div className=\"text-center py-10\">Loading...</div>\n            ) : (\n                <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden\">\n                    <div className=\"overflow-x-auto\">\n                        <table className=\"min-w-full divide-y divide-slate-200\">\n                            <thead className=\"bg-slate-50\">\n                                <tr>\n                                    <th className=\"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider\">\n                                        Name & Principal\n                                    </th>\n                                    <th className=\"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider\">\n                                        Category\n                                    </th>\n                                    <th className=\"px-6 py-4 text-left text-xs font-bold text-slate-500 uppercase tracking-wider\">\n                                        Contact Details\n                                    </th>\n                                    <th className=\"px-6 py-4 text-right text-xs font-bold text-slate-500 uppercase tracking-wider\">\n                                        Actions\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"bg-white divide-y divide-slate-200\">\n                                {schools.map((school) => {\n                                    const categoryLabel = MENU_ITEMS.find(\n                                        item => item.href === \"/\" + school.category || item.href === school.category\n                                    )?.label || school.category;\n\n                                    return (\n                                        <tr key={school._id} className=\"hover:bg-slate-50 transition-colors\">\n                                            <td className=\"px-6 py-4\">\n                                                <div className=\"text-sm font-bold text-slate-900\">\n                                                    {school.name}\n                                                </div>\n                                                <div className=\"text-sm text-slate-500 mt-0.5\">\n                                                    {school.principalName}\n                                                </div>\n                                            </td>\n                                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                                                <span className=\"px-2.5 py-1 inline-flex text-xs leading-5 font-bold rounded-full bg-blue-100 text-blue-700\">\n                                                    {categoryLabel}\n                                                </span>\n                                            </td>\n                                            <td className=\"px-6 py-4\">\n                                                <div className=\"text-sm text-slate-900 font-medium\">{school.phone}</div>\n                                                <div className=\"text-sm text-slate-500 mt-0.5 min-w-[200px] max-w-xs whitespace-normal sm:whitespace-pre-wrap\">\n                                                    {school.address}\n                                                </div>\n                                            </td>\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                                                <button\n                                                    onClick={() => handleDelete(school._id)}\n                                                    className=\"text-red-500 hover:text-red-700 bg-red-50 hover:bg-red-100 px-3 py-1.5 rounded-lg transition-colors text-xs font-bold uppercase tracking-wide\"\n                                                >\n                                                    Delete\n                                                </button>\n                                            </td>\n                                        </tr>\n                                    )\n                                })}\n                                {schools.length === 0 && (\n                                    <tr>\n                                        <td colSpan={4} className=\"px-6 py-10 text-center text-slate-500\">\n                                            No institutions found. Seed data or add a new one.\n                                        </td>\n                                    </tr>\n                                )}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}